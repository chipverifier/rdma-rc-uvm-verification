# RDMA 子系统项目总览

## 1. 项目目标

本项目从系统级、端到端视角出发，设计并实现一个可扩展的 RDMA 网络子系统原型。

项目初期不追求极致性能，核心目标是三点：

* 架构合理
* 协议边界清晰
* 具备长期演进能力

该子系统抽象真实 NIC / DPU 场景下的 RDMA 数据通路，覆盖从 Host 请求注入，到报文发送、接收，再到完成事件返回的完整生命周期。

项目目标是可持续演进 2～3 年，对标真实 RDMA 网络产品的工程化演进路径，而不是一次性 Demo。

---

## 2. 设计原则

1. 端到端优先
   任何阶段都必须保持完整的数据闭环：
   Host -> NIC -> Network -> NIC -> Completion

2. 先架构，后优化
   模块划分和职责边界优先于性能优化。

3. 能力递进式增长
   RDMA 功能逐步叠加，任何阶段都不应推翻既有架构。

4. 接口稳定，实现可替换
   模块接口视为长期契约，实现细节允许演进。

5. 验证是系统级活动
   验证关注系统行为和协议语义，而非孤立模块。

---

## 3. 系统范围界定

### 3.1 初期纳入范围（In Scope）

* RDMA 请求处理（以 SEND / WRITE 为基础）
* Queue Pair（QP）上下文管理
* 报文生成与解析
* TX / RX 数据通路建模
* Completion 生成机制
* 可参数化、可扩展的模块接口

### 3.2 初期明确不做的内容（Out of Scope）

以下内容在早期阶段明确不支持：

* 完整 IB / RoCE 协议兼容
* 拥塞控制算法
* 复杂内存地址转换（IOMMU、ATS 等）
* 安全、加密、认证相关机制
* 线速性能保证

---

## 4. 目标使用者与应用场景

目标使用者包括：

* RDMA NIC / DPU 方向的架构或设计工程师
* 希望系统性理解 RDMA 子系统的工程人员
* 用于面试或技术作品集展示的系统级项目

典型应用场景：

* 展示 RDMA 数据通路整体架构
* 探索协议设计与状态机权衡
* 支持功能与性能的渐进式扩展实验

---

## 5. 长期愿景（终极版本设想）

项目成熟后，子系统可逐步支持：

* 多 QP 并发
* 多 Outstanding 请求
* 可配置队列深度与调度策略
* 基础重传和 Retry 机制
* RX 乱序处理能力
* 可扩展的 Completion Queue 结构
* 关键性能路径的参数化调优

终极目标不是复刻商用 RDMA NIC，而是如实反映一个 RDMA 网络子系统在工程上的复杂度和演进路径。

---

## 6. 项目文档结构

```
docs/
  00_project_overview.md
  01_protocol_scope.md
  02_architecture.md
  03_interface_spec.md
  04_verification_plan.md
  05_roadmap.md
  diagrams/
```

文档会随项目阶段推进逐步补充和细化。

---

## 7. 当前阶段状态

* 阶段：概念定义 / 架构规划
* RTL：未开始
* 验证：未开始
* 当前重心：协议边界与系统架构澄清
